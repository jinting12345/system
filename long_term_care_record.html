<!DOCTYPE html>

<html lang="zh-TW">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>é•·ç…§ç´€éŒ„ç´™æœ¬ç™»æ‰“ç”Ÿæˆç³»çµ±</title>

   

    <script type="module">

        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'

        window.createClient = createClient;

    </script>

   

    <script src="https://unpkg.com/pizzip@3.1.4/dist/pizzip.min.js"></script>

    <script src="https://unpkg.com/docxtemplater@3.37.11/build/docxtemplater.js"></script>

    <script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>

   

    <script src="https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.min.js"></script>

    <script>

        // è¨­å®š Worker

        if (window.pdfjsLib) {

            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js';

        }

    </script>



    <style>

        body { font-family: "Microsoft JhengHei", sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto; background-color: #f5f7fa; color: #333; }

        .container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }

       

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 2px solid #edf2f7; padding-bottom: 15px; }

        .header h1 { color: #2c3e50; margin: 0; font-size: 1.8em; }

        .back-btn { text-decoration: none; background: #6c757d; color: white; padding: 8px 15px; border-radius: 5px; font-size: 0.9em; transition: 0.3s; }

        .back-btn:hover { background: #5a6268; }

       

        .step-section { margin-bottom: 30px; }

        .step-title { font-weight: bold; font-size: 1.2em; color: #2c3e50; margin-bottom: 10px; border-left: 5px solid #3498db; padding-left: 10px; }



        .upload-box { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 20px; text-align: center; background: #f8fafc; transition: 0.3s; }

        .upload-box:hover { border-color: #3498db; background: #ebf8ff; }



        .grid-form { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; background: #fff; padding: 20px; border: 1px solid #e2e8f0; border-radius: 8px; }

        .form-group label { display: block; font-weight: bold; margin-bottom: 5px; color: #4a5568; font-size: 0.9em; }

        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #cbd5e0; border-radius: 4px; font-size: 14px; box-sizing: border-box; background-color: #fdfdfd; }

        .col-span-2 { grid-column: span 2; }

        .col-span-3 { grid-column: span 3; }

        .highlight-label { color: #e53e3e; }



        .btn { width: 100%; padding: 12px; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; color: white; margin-top: 10px; transition: 0.2s; }

        .btn-parse { background-color: #3498db; }

        .btn-generate { background-color: #27ae60; }

        .btn-manual { background-color: #e67e22; }

        .btn:hover { opacity: 0.9; }

        .btn:disabled { background-color: #ccc; cursor: not-allowed; }



        /* æ¨¡å¼åˆ‡æ›å€ */

        .mode-switch { display: flex; gap: 20px; margin-bottom: 15px; padding-left: 10px; }

        .mode-switch label { cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold; color: #555; }

        .mode-switch input[type="radio"] { width: auto; margin: 0; }

       

        .auto-box { border-color: #27ae60; background: #f0fdf4; border-style: dashed; }

        .manual-box { border-color: #e67e22; background: #fffaf0; border-style: dashed; display: none; }



        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.9); display: none; justify-content: center; align-items: center; z-index: 10000; flex-direction: column; }

    </style>

</head>

<body>



<div id="loading-overlay">

    <div style="font-size: 1.5em; color: #3498db; font-weight: bold;">è™•ç†ä¸­...</div>

</div>



<div class="container">

    <div class="header">

        <h1>é•·ç…§ç´€éŒ„ç´™æœ¬ç™»æ‰“ (è‡ªå‹•ç”Ÿæˆ)</h1>

        <a href="menu.html" class="back-btn">â¬… å›é¸å–®</a>

    </div>



    <div class="step-section">

        <div class="step-title">æ­¥é©Ÿ 1: ä¸Šå‚³è©•ä¼°é‡è¡¨ PDF</div>

        <div class="upload-box">

            <input type="file" id="pdf_upload" accept="application/pdf" />

            <button class="btn btn-parse" onclick="parsePDF()">ğŸ” è§£æè³‡æ–™</button>

        </div>

    </div>



    <div class="step-section">

        <div class="step-title">æ­¥é©Ÿ 2: ç¢ºèªç´€éŒ„è³‡æ–™</div>

        <div class="grid-form">

            <div class="form-group"><label>å€‹æ¡ˆå§“å</label><input type="text" id="user_name"></div>

            <div class="form-group"><label>èº«åˆ†è­‰å­—è™Ÿ</label><input type="text" id="user_id"></div>

            <div class="form-group"><label>éƒ¨åˆ†è² æ“”é‡‘é¡</label><input type="text" id="payment_display"></div>



            <div class="form-group"><label>æ€§åˆ¥</label><input type="text" id="gender"></div>

            <div class="form-group"><label>å€‹æ¡ˆç”Ÿæ—¥</label><input type="text" id="birth_date"></div>

            <div class="form-group"><label>CMS ç­‰ç´š</label><input type="text" id="cms_level"></div>

           

            <div class="form-group"><label>è¯çµ¡é›»è©±</label><input type="text" id="phone_number"></div>

            <div class="form-group"><label>é›»è©±æ­¸å±¬</label><input type="text" id="phone_type" style="color: blue;"></div>

            <div class="form-group"><label>ç°½ç´„äººå§“å</label><input type="text" id="contractor_name"></div>



            <div class="form-group"><label>ä»£ç†äººé—œä¿‚</label><input type="text" id="agent_relation"></div>

            <div class="form-group"><label>èº«é«˜ (cm)</label><input type="text" id="height"></div>

            <div class="form-group"><label>é«”é‡ (kg)</label><input type="text" id="weight"></div>

           

            <div class="form-group"><label>BMI</label><input type="text" id="bmi"></div>

            <div class="form-group col-span-2">

                <label class="highlight-label">é€šè¨Šåœ°å€</label>

                <input type="text" id="contact_address">

            </div>



            <div class="form-group col-span-3">

                <label>ç–¾ç—…åç¨±</label>

                <textarea id="diseases" rows="3"></textarea>

            </div>



            <div class="form-group col-span-3">

                <label>å°ˆæ¥­æœå‹™ç›®æ¨™</label>

                <textarea id="service_goal" rows="3"></textarea>

            </div>

        </div>

    </div>



    <div class="step-section">

        <div class="step-title">æ­¥é©Ÿ 3: ç”Ÿæˆ Word ç´€éŒ„è¡¨</div>

       

        <div class="mode-switch">

            <label>

                <input type="radio" name="template_mode" value="auto" checked onchange="switchTemplateMode()">

                ğŸ”’ è‡ªå‹•æ¨¡å¼ (ä½¿ç”¨ç³»çµ±ç¯„æœ¬)

            </label>

            <label>

                <input type="radio" name="template_mode" value="manual" onchange="switchTemplateMode()">

                ğŸ“¤ æ‰‹å‹•ä¸Šå‚³æ¨¡å¼

            </label>

        </div>



        <div id="auto-section" class="upload-box auto-box">

            <p style="color: #27ae60; font-weight: bold;">âœ… å°‡ä½¿ç”¨ç³»çµ±å…§å»ºçš„ç´€éŒ„ç¯„æœ¬</p>

            <button class="btn btn-generate" onclick="generateWordAuto()">ğŸ“„ ä¸‹è¼‰ç´€éŒ„è¡¨ (è‡ªå‹•)</button>

        </div>



        <div id="manual-section" class="upload-box manual-box">

            <p style="color: #e67e22; font-weight: bold;">è«‹é¸æ“‡æ‚¨é›»è…¦ä¸­çš„ Word ç¯„æœ¬ (.docx)</p>

            <input type="file" id="manual_template_upload" accept=".docx" />

            <button class="btn btn-manual" onclick="generateWordManual()">ğŸ“„ ä¸‹è¼‰ç´€éŒ„è¡¨ (æ‰‹å‹•)</button>

        </div>

    </div>

</div>



<script>

    // Supabase è¨­å®š

    const SUPABASE_URL = 'https://oipnjnwootorawargsxe.supabase.co';

    const RAW_KEY = 'sb_publishable_3KbpnkaYl5CxJufjrLKlAQ_0-nzCIII';

    const BUCKET_NAME = 'system_files';

    const TARGET_FILE_NAME = 'record_template.docx';



    let supabase = null;



    window.onload = function() {

        if (window.createClient) {

            supabase = window.createClient(SUPABASE_URL, RAW_KEY);

        }

       

        // å†æ¬¡ç¢ºä¿ Worker è¨­å®šæ­£ç¢º

        if (window.pdfjsLib) {

            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@2.16.105/build/pdf.worker.min.js';

        }

    };



    function showLoading(show) {

        document.getElementById('loading-overlay').style.display = show ? 'flex' : 'none';

    }



    // åˆ‡æ›æ¨¡å¼é¡¯ç¤º

    window.switchTemplateMode = function() {

        const mode = document.querySelector('input[name="template_mode"]:checked').value;

        if(mode === 'auto') {

            document.getElementById('auto-section').style.display = 'block';

            document.getElementById('manual-section').style.display = 'none';

        } else {

            document.getElementById('auto-section').style.display = 'none';

            document.getElementById('manual-section').style.display = 'block';

        }

    }



    // ===========================

    // Word ç”Ÿæˆé‚è¼¯ (åŒ…å«è‡ªå‹•èˆ‡æ‰‹å‹•)

    // ===========================



    // 1. è‡ªå‹•æ¨¡å¼

    async function generateWordAuto() {

        if (!supabase) { alert("ç³»çµ±æœªé€£ç·š"); return; }

        showLoading(true);

        try {

            const { data: listData, error: listError } = await supabase.storage.from(BUCKET_NAME).list('templates');

            if (listError) throw new Error("è®€å–è³‡æ–™å¤¾å¤±æ•—ï¼š" + listError.message);



            const foundFile = listData.find(f => f.name === TARGET_FILE_NAME);

            if (!foundFile) throw new Error(`æ‰¾ä¸åˆ°é›²ç«¯æª”æ¡ˆï¼štemplates/${TARGET_FILE_NAME}`);



            const { data, error } = await supabase.storage

                .from(BUCKET_NAME)

                .download(`templates/${foundFile.name}`);



            if (error) throw error;



            const arrayBuffer = await data.arrayBuffer();

            await generateWordFromBuffer(arrayBuffer, "è‡ªå‹•");

            showLoading(false);



        } catch (e) {

            showLoading(false);

            console.error(e);

            alert("è‡ªå‹•æ¨¡å¼éŒ¯èª¤: " + e.message);

        }

    }



    // 2. æ‰‹å‹•æ¨¡å¼

    async function generateWordManual() {

        const fileInput = document.getElementById('manual_template_upload');

        if (fileInput.files.length === 0) { alert("è«‹å…ˆé¸æ“‡ Word æª”æ¡ˆ"); return; }

       

        showLoading(true);

        try {

            const arrayBuffer = await fileInput.files[0].arrayBuffer();

            await generateWordFromBuffer(arrayBuffer, "æ‰‹å‹•");

            showLoading(false);

        } catch(e) {

            showLoading(false);

            alert("æ‰‹å‹•æ¨¡å¼éŒ¯èª¤: " + e.message);

        }

    }



    // 3. ç”Ÿæˆæ ¸å¿ƒ (ç°¡å–®ç›´æ¥ï¼Œä¸æè¤‡é›œä¿®å¾©)

    async function generateWordFromBuffer(arrayBuffer, modeName) {

        if (typeof PizZip === 'undefined') { throw new Error("Docx æ¨¡çµ„æœªè¼‰å…¥"); }

        const zip = new PizZip(arrayBuffer);

        const doc = new window.docxtemplater(zip, {

            paragraphLoop: true,

            linebreaks: true,

            nullGetter: () => "",

            delimiters: { start: '{{', end: '}}' }

        });



        const templateData = {

            user_name: document.getElementById('user_name').value,

            user_id: document.getElementById('user_id').value,

            payment_display: document.getElementById('payment_display').value,

            gender: document.getElementById('gender').value,

            birth_date: document.getElementById('birth_date').value,

            cms_level: document.getElementById('cms_level').value,

            phone_number: document.getElementById('phone_number').value,

            phone_type: document.getElementById('phone_type').value,

            contractor_name: document.getElementById('contractor_name').value,

            agent_relation: document.getElementById('agent_relation').value,

            height: document.getElementById('height').value,

            weight: document.getElementById('weight').value,

            bmi: document.getElementById('bmi').value,

            contact_address: document.getElementById('contact_address').value,

            diseases: document.getElementById('diseases').value,

            service_goal: document.getElementById('service_goal').value,

            today: new Date().toLocaleDateString('zh-TW')

        };



        doc.setData(templateData);

       

        try {

            doc.render();

        } catch (error) {

            if(error.properties && error.properties.errors) {

                const errorMessages = error.properties.errors.map(e => e.properties.explanation).join("\n");

                throw new Error("Word æ ¼å¼éŒ¯èª¤ (è«‹æª¢æŸ¥ Word æ¨™ç±¤)ï¼š\n" + errorMessages);

            }

            throw error;

        }



        const blob = doc.getZip().generate({

            type: "blob",

            mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",

        });



        saveAs(blob, `ç´€éŒ„è¡¨_${templateData.user_name}_${modeName}.docx`);

    }



    // ===========================

    // PDF è§£æé‚è¼¯ (ä¿ç•™æ‚¨åŸæœ‰çš„å¼·å¤§è§£æ)

    // ===========================

    function cleanTextDeep(text) {

        return text.replace(/[\s\n\r]/g, "")

                   .replace(/â€»/g, "")

                   .replace(/\(é‡Œ[ã€ï¼Œ]é„°[ã€ï¼Œ]éƒµéå€è™Ÿ.*?\)/g, "")

                   .replace(/[()]/g, "ï¼ˆï¼‰")

                   .replace(/ï¼ˆ/g, "(").replace(/ï¼‰/g, ")");

    }



    function extractAddressFromChunk(chunk) {

        const regex = /(.{2,4}[ç¸£å¸‚].*?(?:è™Ÿ|æ¨“)(?:[\dä¹‹-]*[æ¨“Ff])?)/;

        const match = chunk.match(regex);

        if (match) return match[1].replace(/^[^å°è‡ºé«˜æ–°åŒ—æ¡ƒä¸­å—åŸºå®œèŠ±æ±æ¾é‡‘é€£è‹—å½°é›²å˜‰å±]*/, "");

        return "";

    }



    async function parsePDF() {

        if (typeof pdfjsLib === 'undefined') { alert("PDF å…ƒä»¶è¼‰å…¥ä¸­"); return; }

        const fileInput = document.getElementById('pdf_upload');

        if (fileInput.files.length === 0) { alert("è«‹å…ˆé¸æ“‡ PDF!"); return; }



        showLoading(true);



        try {

            const file = fileInput.files[0];

            const arrayBuffer = await file.arrayBuffer();

            const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;



            let fullText = "";

            for (let i = 1; i <= pdf.numPages; i++) {

                const page = await pdf.getPage(i);

                const textContent = await page.getTextContent();

                fullText += textContent.items.map(item => item.str).join("");

            }



            const cleanText = cleanTextDeep(fullText);

           

            // ç–¾ç—…è§£æ

            let diseasesList = [];

            const g4eIndex = cleanText.indexOf("G4e");

            const endG4e = cleanText.indexOf("G4f");

            if (g4eIndex !== -1) {

                const section = cleanText.substring(g4eIndex, endG4e !== -1 ? endG4e : g4eIndex + 2500);

                let safeSection = section.replace(/[â˜â–¡]æœ‰/g, "---");

                const itemRegex = /([â˜â˜‘â– â–¡âœ“âœ”R]?\d{1,2}\..*?)(?=[â˜â˜‘â– â–¡âœ“âœ”R]?\d{1,2}\.|G4f|$)/g;

                let match;

                while ((match = itemRegex.exec(safeSection)) !== null) {

                    const fullItem = match[1];

                    const numMatch = fullItem.match(/(\d{1,2})\./);

                    if (!numMatch) continue;

                    const itemNum = parseInt(numMatch[1]);

                    let isSick = false;

                    if ((itemNum >= 1 && itemNum <= 3) || itemNum === 10) {

                        if (fullItem.includes("æœ‰") || /[â˜‘â– âœ“âœ”R]/.test(fullItem)) isSick = true;

                    } else {

                        if (/[â˜‘â– âœ“âœ”R]/.test(fullItem)) isSick = true;

                    }

                    if (isSick) {

                        let name = fullItem.replace(/^[â˜â˜‘â– â–¡âœ“âœ”R]?\d{1,2}\./, "");

                        name = name.replace(/(ç›®å‰æ­£åœ¨æ²»ç™‚|ç›®å‰ä½¿ç”¨è—¥ç‰©|æœ‰|â˜|â–¡|â˜‘|â– |:|ï¼š|---).*/g, "").trim();

                        if (name.includes("(") && !name.includes(")")) name += ")";

                        if (name.length > 1 && !diseasesList.includes(name)) diseasesList.push(name);

                    }

                }

            }



            // åœ°å€è§£æ

            let cAddr = "";

            let idxContact = cleanText.indexOf("é€šè¨Šåœ°å€");

            if (idxContact === -1) idxContact = cleanText.indexOf("å±…ä½é€šè¨Š");

            if (idxContact === -1 && cleanText.lastIndexOf("å±…ä½") !== -1) idxContact = cleanText.lastIndexOf("å±…ä½");

            if (idxContact !== -1) {

                let foundAddr = extractAddressFromChunk(cleanText.substring(idxContact, idxContact + 200));

                if (foundAddr) cAddr = foundAddr;

            }

            if (!cAddr) {

                const idxHouse = cleanText.indexOf("æˆ¶ç±åœ°å€");

                if (idxHouse !== -1) cAddr = extractAddressFromChunk(cleanText.substring(idxHouse, idxHouse + 150));

            }



            // åŸºæœ¬è³‡æ–™

            let userName = "", userId = "";

            const headerMatch = cleanText.match(/å§“å\/èº«åˆ†è­‰å­—è™Ÿ[:ï¼š]?([^\/]+)\/([A-Z][0-9]{9})/);

            if (headerMatch) { userName = headerMatch[1].replace(/[:ï¼š]/g, ""); userId = headerMatch[2]; }



            let birthDate = "", gender = "";

            const birthMatch = cleanText.match(/å€‹æ¡ˆç”Ÿæ—¥[:ï¼š]?(\d{2,3}\/\d{1,2}\/\d{1,2})/);

            if (birthMatch) birthDate = birthMatch[1];

            const genderMatch = cleanText.match(/æ€§åˆ¥[:ï¼š]?([ç”·å¥³])/);

            if (genderMatch) gender = genderMatch[1];



            // é›»è©±

            let phoneNum = "", phoneType = "å€‹æ¡ˆæœ¬äºº";

            let isAgentApp = cleanText.includes("ç”³è«‹äººéæœ¬äºº") || cleanText.includes("ç”³è«‹äºº:éæœ¬äºº");

            const agentPhoneMatch = cleanText.match(/ä»£ç†äººæ‰‹æ©Ÿ[:ï¼š]?((09\d{8}))/);

            const userPhoneMatch = cleanText.match(/å€‹æ¡ˆé›»è©±.*?((09\d{8})|(0\d{1,2}-?\d{6,8}))/);



            if (isAgentApp && agentPhoneMatch) {

                phoneNum = agentPhoneMatch[1];

                phoneType = "ä»£ç†äºº";

            } else if (userPhoneMatch) {

                phoneNum = userPhoneMatch[1];

            } else if (agentPhoneMatch) {

                phoneNum = agentPhoneMatch[1];

                phoneType = "ä»£ç†äºº (å‚™ç”¨)";

            }



            let agentRelation = "";

            const relationMatch = cleanText.match(/é—œä¿‚æˆ–èº«åˆ†[:ï¼š]?([^å…¶ä»–a-zA-Z]+)/);

            if (relationMatch && isAgentApp) agentRelation = relationMatch[1].replace(/[:ï¼š]/g, "").trim();



            let valHeight = "", valWeight = "", valBMI = "";

            const hMatch = cleanText.match(/èº«é«˜[:ï¼š]?(\d+(\.\d+)?)å…¬åˆ†/);

            if (hMatch) valHeight = hMatch[1];

            const wMatch = cleanText.match(/é«”é‡[:ï¼š]?(\d+(\.\d+)?)å…¬æ–¤/);

            if (wMatch) valWeight = wMatch[1];

            const bmiMatch = cleanText.match(/BMIç‚º[:ï¼š]?(\d+(\.\d+)?)/);

            if (bmiMatch) valBMI = bmiMatch[1];



            let serviceGoal = "";

            const goalMatch = cleanText.match(/å°ˆæ¥­æœå‹™ç›®æ¨™\)?[:ï¼š]?(.*?)ã€‚/);

            if (goalMatch) serviceGoal = goalMatch[1];

            else {

                const goalMatchBackup = cleanText.match(/æœ€å¸Œæœ›æ”¹å–„çš„æ—¥å¸¸ç”Ÿæ´»æ´»å‹•é …ç›®[:ï¼š]?(.*?)ã€‚/);

                if (goalMatchBackup) serviceGoal = goalMatchBackup[1];

            }

            serviceGoal = serviceGoal.replace(/^\(\)/, "").replace(/^ï¼ˆï¼‰/, "");



            let paymentTxt = "ç¬¬ä¸‰é¡";

            if (cleanText.includes("é•·ç…§ç¦åˆ©ç¬¬ä¸‰é¡")) { paymentTxt = "ç¬¬ä¸‰é¡"; }

            else if (cleanText.includes("é•·ç…§ç¦åˆ©ç¬¬äºŒé¡")) { paymentTxt = "ç¬¬äºŒé¡"; }

            else if (cleanText.includes("é•·ç…§ç¦åˆ©ç¬¬ä¸€é¡")) { paymentTxt = "ç¬¬ä¸€é¡"; }



            let contractorName = userName;

            if (isAgentApp) {

                const agentNameMatch = cleanText.match(/ä»£ç†äººå§“å[:ï¼š]?([^\sä»£ç†äºº]+)/);

                if (agentNameMatch) contractorName = agentNameMatch[1];

            }

           

            // CMS ç­‰ç´š

            let cmsLevel = "";

            const lastCmsIndex = cleanText.lastIndexOf("CMSç­‰ç´š");

            if (lastCmsIndex !== -1) {

                const chunk = cleanText.substring(lastCmsIndex, lastCmsIndex + 200);

                const match = chunk.match(/ç¬¬\s*(\d+)\s*ç´š/);

                if (match) cmsLevel = "ç¬¬" + match[1] + "ç´š";

            }



            // å¡«å…¥è³‡æ–™

            document.getElementById('user_name').value = userName;

            document.getElementById('user_id').value = userId;

            document.getElementById('phone_number').value = phoneNum;

            document.getElementById('phone_type').value = phoneType;

            document.getElementById('gender').value = gender;

            document.getElementById('birth_date').value = birthDate;

            document.getElementById('payment_display').value = paymentTxt;

            document.getElementById('contractor_name').value = contractorName;

            document.getElementById('agent_relation').value = agentRelation;

            document.getElementById('height').value = valHeight;

            document.getElementById('weight').value = valWeight;

            document.getElementById('bmi').value = valBMI;

            document.getElementById('cms_level').value = cmsLevel;

            document.getElementById('diseases').value = diseasesList.join("ã€");

            document.getElementById('service_goal').value = serviceGoal;

            document.getElementById('contact_address').value = cAddr;



            showLoading(false);



        } catch (err) {

            showLoading(false);

            console.error(err);

            alert("è§£æéŒ¯èª¤: " + err.message);

        }

    }

</script>



</body>

</html>
